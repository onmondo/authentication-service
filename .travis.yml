sudo: required
language: node_js
services:
  - docker

before_install:

script:

after_success:
  - docker build -t jrblando/authentication-service:auth-service -f ./dockerfiles/auth.Dockerfile ./auth-service
  - docker build -t jrblando/authentication-service:router-service -f ./dockerfiles/router.Dockerfile ./router-service
  - docker build -t jrblando/authentication-service:sms-service -f ./dockerfiles/sms.Dockerfile ./sms-service
  - docker build -t jrblando/authentication-service:redis-server -f ./dockerfiles/redis.Dockerfile ./redis-server

  # Log in to docker cli
  - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_ID" --password-stdin

  # Take those images and push them to docker hub
  - docker push jrblando/authentication-service:auth-service
  - docker push jrblando/authentication-service:router-service
  - docker push jrblando/authentication-service:sms-service
  - docker push jrblando/authentication-service:redis-server
